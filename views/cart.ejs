<%- contentFor('body') -%>
    <section class="jumbotron text-center">
        <div class="container">
            <h1 class="jumbotron-heading">NA Store Cart</h1>
        </div>
    </section>

    <div class="container mb-4">
        <div class="row">
            <div class="col-12">
                <div class="table-responsive">
                    <table class="table table-hover">
                        <thead>
                            <tr>
                                <th class="text-center">Image</th>
                                <th class="text-center">Product</th>
                                <th class="text-center">Quantity</th>
                                <th class="text-center">Price</th>
                                <th class="text-center">Total Price</th>
                                <th class="text-center">Action</th>
                            </tr>
                        </thead>
                        <tbody>
                            <% cart.forEach(product=> { %>
                                <tr>
                                    <td class="text-center">
                                        <img src="<%= product.image %>" class="img-thumbnail"
                                            style="width: 60px; height: 60px;" />
                                    </td>
                                    <td class="text-center">
                                        <strong>
                                            <%= product.name %>
                                        </strong>
                                    </td>
                                    <td class="text-center">
                                        <span>
                                            <%= product.quantity %>
                                        </span>
                                    </td>
                                    <td class="text-center">
                                        <span class="text-success">
                                            <%= product.price %> $
                                        </span>
                                    </td>
                                    <td class="text-center">
                                        <span class="text-success">
                                            <%= (product.price * product.quantity).toFixed(2) %> $
                                        </span>
                                    </td>
                                    <td class="text-center">
                                        <a href="/add-to-cart?id=<%= product.id %>&isAdd=false"
                                            class="btn btn-sm btn-outline-danger"><i class="fa fa-trash"></i> Remove</a>
                                    </td>
                                </tr>
                                <% }) %>
                                    <tr>
                                        <td></td>
                                        <td></td>
                                        <td></td>
                                        <td></td>
                                        <td></td>
                                        <td></td>
                                    </tr>
                                    <tr>
                                        <td></td>
                                        <td></td>
                                        <td></td>
                                        <td class="text-right">Total (Quantity x Price)</td>
                                        <td class="text-center">
                                            <%= cart.reduce((total, product)=> total + (product.quantity *
                                                product.price), 0).toFixed(2) %> $
                                        </td>
                                        <td></td>
                                    </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            <div class="col mb-2">
                <div class="row">
                    <div class="col-sm-12  col-md-6">
                        <a href="/list-product" class="btn btn-block btn-light">Continue Shopping</a>
                    </div>
                    <div class="col-sm-12 col-md-6 text-right">
                        <% if (cart.length===0) { %>
                            <a href="/checkout" title="You should add at least 1 product"
                                style="text-decoration: none;">
                                <button class="btn btn-lg btn-block btn-success text-uppercase"
                                    disabled>Checkout</button>
                            </a>
                            <% } else if (!user) { %>
                                <a href="/checkout" title="You must log in to checkout!" style="text-decoration: none;">
                                    <button class="btn btn-lg btn-block btn-success text-uppercase"
                                        disabled>Checkout</button>
                                </a>
                                <% } else { %>
                                    <a href="/checkout" style="text-decoration: none;">
                                        <button
                                            class="btn btn-lg btn-block btn-success text-uppercase">Checkout</button>
                                    </a>
                                    <% } %>
                    </div>
                </div>
            </div>
        </div>
    </div>